多个hit可能属于一个γ事件，要聚合成一个cluster；这个怎么理解

---

### ✅ 背景：γ光子进入PET探测器会发生什么？

在PET中，每一个γ光子（例如一个511 keV光子）进入探测器后，可能会：

1. 与晶体发生一次或多次**康普顿散射**；
2. 被某一块或几块晶体吸收；
3. 每次与晶体相互作用时，都会产生一堆光子（闪烁光），被SiPM（如DPC）感知；
4. 每次光的产生，都会变成一个“hit”（探测器信号），记录下位置、能量和时间。

---

### ✅ “多个hit属于一个γ事件”的意思

一个γ光子在进入探测器时，可能：

- 只击中一个晶体 → 产生一个hit；
- 在晶体中被多次散射 → 产生多个hit（可能在不同晶体）；
- 或者，多个SiPM同时响应 → 在相邻晶体都产生信号。

这些都属于**同一个γ光子造成的**，因此这些hit被认为是一个“事件”的组成部分。

---

### ✅ 为什么要“聚类”这些hit？

> 为了准确定位 γ 光子的作用点（interaction point）和能量，需要将这些离散的 hit 聚合成一个 cluster。

也就是说：
- **一个 cluster ≈ 一个 γ 光子击中探测器的结果**
- **多个 hit（在时间上接近、空间上邻近） → 合并为一个 cluster**

这个聚类的过程叫 **event clustering**，一般用一个时间窗（比如 40 ns）：
- 如果多个hit发生在40 ns之内，并且空间位置接近（比如在同一晶体或相邻晶体），就归为一个cluster。

---

### ✅ 举个例子：

一个γ光子进入探测器 → 它在两个相邻晶体里产生了信号 → 得到了两个hit（hit A 和 hit B）：

- hit A：t = 100 ns，位置 (x1, y1)，能量 700
- hit B：t = 102 ns，位置 (x2, y2)，能量 900

因为这两个hit：
- 时间差小于 40 ns；
- 位置很近；
- 总能量接近511 keV，

所以系统会判断它们来自**同一个γ光子**，将它们组合成一个 **cluster**。

---

### ✅ 总结一句话：

> PET中，一个γ光子可能在探测器中留下多个“hit”（探测信号），而这些hit实际上属于一个物理事件（即一个γ进入探测器），所以需要将它们**时间和空间上聚合**成一个cluster，用于后续的事件配对和图像重建。
